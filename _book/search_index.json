[
["index.html", "Data Manipulation and Management in R üôÄ 1 Heroes Are Made 1.1 Background", " Data Manipulation and Management in R üôÄ Ning Lu Bradford Institute of Health Research (BIHR)Bradford Teaching Hospitals NHS Foundation Trust (BTHFT) Centre for Applied Education Research (CAER)Leeds Institute for Data Analytics, University of Leeds (LIDA) 2019-11-28 1 Heroes Are Made A hero is somebody who voluntarily walks into the unknown. To become a hero in R, you have to voluntarily walk into the unknown of R and the world of data science. 1.1 Background This is a R learning and sharing platform for data manipulation and management. I will gradually build in more data science materials here. My ultimate goal is to consolidate all the learning experience and knowledge in R and share it through this platform. While the platform is open to anyone who is interested in learning data manipulation and management with R, the primary target audience is members of Bradford Institute of Health Research (BIHR), Bradford Teaching Hospitals NHS Foundation Trust (BTHFT), Centre for Applied Education Research (CAER) and Leeds Data Science Society. When you come here, I don‚Äôt expect you to have a lot of R knowledge. However, I hope that when you leave here, you‚Äôd at least learn something new in data manipulation and management through R - something would make you a hero üòé for a while. "],
["begin-with-the-end.html", "2 Begin with the end 2.1 Set your goalpost", " 2 Begin with the end Stephen Covey is the author of ‚ÄúThe 7 Habits of Highly Effective People‚Äù. Habit 2: Begin With the End in Mind. 2.1 Set your goalpost All beginnings are difficult. In data science, one reason making all the beginnings harder is that we just don‚Äôt know what sort of question we‚Äôre trying to answer. That‚Äôs why we often run into the dilemma of ‚ÄúMoving The Goalposts‚Äù. It‚Äôs not necessarily wrong but it can become frustrated if you get asked to go north first and south later. But then the answer is in fact next to you. For data manipulation and management, we should think about the end product first and do more reverse thinking than forward thinking. For example, what sort of end products do we commonly need to include in the end product? Data visualisation? Poster? Coding sharing? Data Management? Journal article write-up? The key point is that how we can improve the workflow across need end and we can easily generate and reproduce our end product. par(mar = c(4, 4, .1, .1)) plot(pressure, type = &#39;b&#39;, pch = 19) Figure 2.1: Here is a nice figure! "],
["mari-kondo.html", "3 Mari Kondo 3.1 Tidy your files", " 3 Mari Kondo Marie Kondo is the author of The Life-Changing Magic of Tidying Up: The Japanese Art of Decluttering and Organizing. The best way to choose what to keep and what to throw away is to take each item in one‚Äôs hand and ask: ‚ÄúDoes this spark joy?‚Äù If it does, keep it. If not, dispose of it. This is not only the simplest but also the most accurate yardstick by which to judge. 3.1 Tidy your files There‚Äôre a number of ways to organise data science work. The key is to set up Rproject and GitHub. Here we list two main approaches to achieve this end. The first way is the pull way where we get both Rproject and git integrated from outside - GitHub. You use the github function from usethis package and put down (‚ÄúOWNER/REPO_NAME‚Äù) and opt for https when you get asked on git protocol. &gt; usethis::create_from_github(&quot;dataning/learn_usethis&quot;) Which git protocol to use? (enter 0 to exit) 1: ssh &lt;-- presumes that you have set up ssh keys 2: https &lt;-- choose this if you don&#39;t have ssh keys (or don&#39;t know if you do) Selection: 2 ‚óè Tip: To suppress this menu in future, put `options(usethis.protocol = &quot;https&quot;)` in your script or in a user- or project-level startup file, &#39;.Rprofile&#39;. Call `usethis::edit_r_profile()` to open it for editing. ‚úî Cloning repo from &#39;https://github.com/dataning/learn_usethis.git&#39; into &#39;/Users/sushicat/Desktop/learn_usethis&#39; ‚úî Setting active project to &#39;/Users/sushicat/Desktop/learn_usethis&#39; ‚úî Writing &#39;learn_usethis.Rproj&#39; ‚úî Adding &#39;.Rproj.user&#39; to &#39;.gitignore&#39; ‚úî Opening &#39;/Users/sushicat/Desktop/learn_usethis/&#39; in new RStudio session ‚úî Setting active project to &#39;&lt;no active project&gt;&#39; The second way is to imagine you‚Äôre working in a random folder and you wish to set up the Rproject &gt; library(usethis) &gt; library(here) here() starts at /Users/sushicat/Dropbox/R_Me &gt; here::here() [1] &quot;/Users/sushicat/Dropbox/R_Me&quot; &gt; path &lt;- file.path(here(), &quot;learn_usethis&quot;) create_project(path) ‚úî Creating &#39;/Users/sushicat/Dropbox/R_Me/learn_usethis/&#39; ‚úî Setting active project to &#39;/Users/sushicat/Dropbox/R_Me/learn_usethis&#39; ‚úî Creating &#39;R/&#39; ‚úî Writing &#39;learn_usethis.Rproj&#39; ‚úî Adding &#39;.Rproj.user&#39; to &#39;.gitignore&#39; ‚úî Opening &#39;/Users/sushicat/Dropbox/R_Me/learn_usethis/&#39; in new RStudio session ‚úî Setting active project to &#39;&lt;no active project&gt;&#39; "],
["alfred-pennyworth.html", "4 Alfred Pennyworth 4.1 Log your work", " 4 Alfred Pennyworth Alfred Pennyworth is Bruce Wayne (Batman)‚Äôs loyal and tireless butler, housekeeper, legal guardian, best friend, aide-de-camp. What was the point of all those push-ups if you can‚Äôt even lift up a bloody log? 4.1 Log your work First, choose New Project and New Directiory. Second, choose Book Project using bookdown and pick a name as well as your preferred directory. RStudio will automatically set up the Rproj as well as the folder skeleton. Third, tie the existing project with Git through the usethis package. It will re-organise the existing project folder and prepare the Git integration. &gt; usethis::use_git() ‚úî Setting active project to &#39;/Users/sushicat/Dropbox/R_Me/R_DE&#39; ‚úî Initialising Git repo ‚úî Adding &#39;.Rhistory&#39;, &#39;.RData&#39;, &#39;.Rproj.user&#39; to &#39;.gitignore&#39; There are 15 uncommitted files: * &#39;_bookdown.yml&#39; * &#39;_output.yml&#39; * &#39;.gitignore&#39; * &#39;01-intro.Rmd&#39; * &#39;02-literature.Rmd&#39; * &#39;03-method.Rmd&#39; * &#39;04-application.Rmd&#39; * &#39;05-summary.Rmd&#39; * &#39;06-references.Rmd&#39; * &#39;book.bib&#39; * &#39;index.Rmd&#39; * &#39;preamble.tex&#39; * &#39;R_DE.Rproj&#39; * &#39;README.md&#39; * &#39;style.css&#39; Is it ok to commit them? 1: Not now 2: For sure 3: No way Selection: 2 ‚úî Adding files ‚úî Commit with message &#39;Initial commit&#39; ‚óè A restart of RStudio is required to activate the Git pane Restart now? 1: Not now 2: Yup 3: Absolutely not Selection: 2 Fourth, create a GitHub repo through the usethis package and if the project name is available on the owner‚Äôs repos. When facing git protocol, choose https. &gt; usethis::use_github() ‚úî Setting active project to &#39;/Users/sushicat/Dropbox/R_Me/R_DE&#39; ‚úî Checking that current branch is &#39;master&#39; Which git protocol to use? (enter 0 to exit) 1: ssh &lt;-- presumes that you have set up ssh keys 2: https &lt;-- choose this if you don&#39;t have ssh keys (or don&#39;t know if you do) Selection: 2 ‚óè Tip: To suppress this menu in future, put `options(usethis.protocol = &quot;https&quot;)` in your script or in a user- or project-level startup file, &#39;.Rprofile&#39;. Call `usethis::edit_r_profile()` to open it for editing. ‚óè Check title and description Name: Bradford Description: Are title and description ok? 1: Yeah 2: Not now 3: Absolutely not Selection: 1 ‚úî Creating GitHub repository ‚úî Setting remote &#39;origin&#39; to &#39;https://github.com/dataning/R_DE.git&#39; ‚úî Pushing &#39;master&#39; branch to GitHub and setting remote tracking branch ‚úî Opening URL &#39;https://github.com/dataning/R_DE&#39; Fifth, create and save a random R.script in the current project. The commit and push the change of the project to your GitHub repo. You can go to your GitHub repo and check if the R script has been added. This should tell you whether your Rproj and GitHub Repo are fully synced/integrated. Sixth, go to Netlify and deploy your GitHub repo on Netlify. This will give you the ability to perform continuous deployment as well as deployment to custom domain. Type in your Rpoj‚Äôs GitHub repo name. You need to put down _book in Publish directory. "],
["rmarkdown-with-sublime.html", "5 RMarkdown with Sublime", " 5 RMarkdown with Sublime Memory is the diary we all carry about with us. But memory is also fragile and fallible. We need to start documenting things. One of the best things for R markdown is that you can write and code on the same surface. However, the interface of RStudio feels like more ‚Äúbrief writing‚Äù than ‚Äúproper writing‚Äù. For all the writing, I prefer to do it in Sublime because it‚Äôs fast and code-integrated. The way to do is to install R-box and knitr in the Sumline. Shift + CMD + P Select R-box or knitr packages Once the installation is finished, please make sure the file type is R Markdown from the bottom right corner. You should provide a basic YAML setting for your R markdown. --- title: Lens and Movements Piloting (LAMP) author: Lawrence Ning date: March 22, 2005 output: pdf_document --- "],
["elastigirl.html", "6 Elastigirl 6.1 Tiki-taka your workflow", " 6 Elastigirl Elastigirl, also known as Mrs. Incredible, is a fictional character who appears in The Incredibles. When designing the Incredible family, Brad Bird wanted each of their superpowers to be related to their personality. He felt that as a mother, Helen was required by society to be pulled in many different directions, which led to her being given an elastic ability. The same we can say to all sort of data science projects. We are always required by different stakeholders to be pull in many different directions. For us, we have to nail down where we are and how to initiate a new project first. 6.1 Tiki-taka your workflow First of all, we find where we stand. &gt; here::here() [1] &quot;/Users/sushicat/Dropbox/R_Me/Hero_book&quot; Second, we find out what we are being surrounded. &gt; fs::dir_ls() 01-think.Rmd 02-pm.Rmd 03-load-data.Rmd 04-tidy-data.Rmd 05-bayesian.Rmd 06-Elastigirl_1.Rmd 06_Elastigirl_1.R 20-references.Rmd CreditCard Creditcard_hack.R Data Hero_book.Rproj Hero_book.log README.md _book _bookdown.yml _bookdown_files _output.yml book.bib index.Rmd packages.bib preamble.tex style.css Third, we pick somewhere (in this case - the data folder) to explore further. &gt; fs::dir_ls(&quot;Data&quot;) &gt; fs::dir_ls(&quot;Data/Subway_delays&quot;) Data/Subway_delays/Subway&amp;SRT_Logs_April_2018.xlsx Data/Subway_delays/Subway&amp;SRT_Logs_February_2018.xlsx Data/Subway_delays/Subway&amp;SRT_Logs_March_2018.xlsx Data/Subway_delays/Subway&amp;SRT_Logs_May_2018.xlsx Data/Subway_delays/Subway_&amp;_SRT_Logs_(August_2018).xlsx Data/Subway_delays/Subway_&amp;_SRT_Logs_(September_2018).xlsx Data/Subway_delays/Subway_&amp;_SRT_Logs_December_2018.xlsx Data/Subway_delays/Subway_&amp;_SRT_Logs_November_2018.xlsx Data/Subway_delays/Subway_SRT_Logs(January 2018).xlsx Data/Subway_delays/Subway_SRT_Logs(July_2018).xlsx Data/Subway_delays/Subway_SRT_Logs(June2018).xlsx Data/Subway_delays/Subway_SRT_Logs(October 2018).xlsx Alternatively, we can use the tree strcuture to show the folder. &gt; fs::dir_tree(&quot;Data/Subway_delays&quot;) Data/Subway_delays ‚îú‚îÄ‚îÄ Subway&amp;SRT_Logs_April_2018.xlsx ‚îú‚îÄ‚îÄ Subway&amp;SRT_Logs_February_2018.xlsx ‚îú‚îÄ‚îÄ Subway&amp;SRT_Logs_March_2018.xlsx ‚îú‚îÄ‚îÄ Subway&amp;SRT_Logs_May_2018.xlsx ‚îú‚îÄ‚îÄ Subway_&amp;_SRT_Logs_(August_2018).xlsx ‚îú‚îÄ‚îÄ Subway_&amp;_SRT_Logs_(September_2018).xlsx ‚îú‚îÄ‚îÄ Subway_&amp;_SRT_Logs_December_2018.xlsx ‚îú‚îÄ‚îÄ Subway_&amp;_SRT_Logs_November_2018.xlsx ‚îú‚îÄ‚îÄ Subway_SRT_Logs(January 2018).xlsx ‚îú‚îÄ‚îÄ Subway_SRT_Logs(July_2018).xlsx ‚îú‚îÄ‚îÄ Subway_SRT_Logs(June2018).xlsx ‚îî‚îÄ‚îÄ Subway_SRT_Logs(October 2018).xlsx Fourth, we make a shortcut if this is where we‚Äôd like to use or come back later. &gt; fs::dir_tree(here::here(&quot;Data&quot;, &quot;Subway_delays&quot;)) /Users/goal/Dropbox/R_Me/Hero_book/Data/Subway_delays ‚îú‚îÄ‚îÄ Subway&amp;SRT_Logs_April_2018.xlsx ‚îú‚îÄ‚îÄ Subway&amp;SRT_Logs_February_2018.xlsx ‚îú‚îÄ‚îÄ Subway&amp;SRT_Logs_March_2018.xlsx ‚îú‚îÄ‚îÄ Subway&amp;SRT_Logs_May_2018.xlsx ‚îú‚îÄ‚îÄ Subway_&amp;_SRT_Logs_(August_2018).xlsx ‚îú‚îÄ‚îÄ Subway_&amp;_SRT_Logs_(September_2018).xlsx ‚îú‚îÄ‚îÄ Subway_&amp;_SRT_Logs_December_2018.xlsx ‚îú‚îÄ‚îÄ Subway_&amp;_SRT_Logs_November_2018.xlsx ‚îú‚îÄ‚îÄ Subway_SRT_Logs(January 2018).xlsx ‚îú‚îÄ‚îÄ Subway_SRT_Logs(July_2018).xlsx ‚îú‚îÄ‚îÄ Subway_SRT_Logs(June2018).xlsx ‚îî‚îÄ‚îÄ Subway_SRT_Logs(October 2018).xlsx Let‚Äôs chain everything together. We present the folder with the dataset - it‚Äôs like placing the meat and veggie into an oven tray. We then put the tray to an oven called purrr and it would import all the spreadsheet files in this particular folder - it‚Äôs like an oven. Finally, we use the cleaning wipe from janitor and clean up the the column names - the ambiguity bit. delays_clean &lt;- fs::dir_ls(here::here(&quot;Data&quot;, &quot;Subway_delays&quot;)) %&gt;% purrr::map_dfr(readxl::read_excel) %&gt;% janitor::clean_names() "],
["data-manipulation-i.html", "7 Data Manipulation I 7.1 dplyr vs data.table", " 7 Data Manipulation I Some significant writing are coming in this chapter. 7.1 dplyr vs data.table "],
["data-manipulation-ii.html", "8 Data Manipulation II 8.1 tidyverse", " 8 Data Manipulation II 8.1 tidyverse "],
["data-manipulation-iii.html", "9 Data Manipulation III 9.1 data.table", " 9 Data Manipulation III 9.1 data.table "],
["rstudio-shortcuts.html", "10 RStudio shortcuts 10.1 Dividing code sections 10.2 Pipe sign ‚Äú%&gt;%‚Äù", " 10 RStudio shortcuts Double tap wins. 10.1 Dividing code sections Insert Section ‚Äî Ctrl+Shift+R (Cmd+Shift+R on the Mac) Jump To ‚Äî Shift+Alt+J RStudio Addin - creates boxed in titles in an Rscript devtools::install_github(&quot;ThinkR-open/littleboxes&quot;) 10.2 Pipe sign ‚Äú%&gt;%‚Äù ‚ÄúInsert %&gt;%‚Äù inserts ‚Äú%&gt;%‚Äù (Shift-ALT-m or Shift-cmd-m One is to create a new dataset and the other one is to re-assign the new data elements into an existing dataset. db &lt;- df %&gt;% select(1:3) %&gt;% filter(mpg &gt; 20, cyl == 6) df %&lt;&gt;% select(1:3) %&gt;% filter(mpg &gt; 20, cyl == 6) # Good iris %&gt;% group_by(Species) %&gt;% summarize_if(is.numeric, mean) %&gt;% ungroup() %&gt;% gather(measure, value, -Species) %&gt;% arrange(value) # Bad iris %&gt;% group_by(Species) %&gt;% summarize_all(mean) %&gt;% ungroup %&gt;% gather(measure, value, -Species) %&gt;% arrange(value) "],
["visualisation.html", "11 Visualisation 11.1 ggplot2 family", " 11 Visualisation 11.1 ggplot2 family "],
["references.html", "References", " References "]
]
